<style type="text/css">
.accent-gradient #load.light-loading {
    background-image: none;
    background-color: rgba(255, 255, 255, 0.95);
}
#load.light-loading {
    background-color: rgba(255, 255, 255, 0.95);
}
.accent-gradient .share-overlay, .accent-gradient .overlay, .accent-gradient #load {
    background: transparent linear-gradient(30deg, #8DC63F 0%, #03AFEB 100%) repeat scroll 0% 0%;
}
body #load {
    height: 100%;
    overflow: hidden;
    position: fixed;
    width: 100%;
    z-index: 9501;
}
.share-overlay, .overlay, #load {
    background-color: #8DC63F;
}
.pace {
    pointer-events: none;
    -moz-user-select: none;
}
#load .pace .pace-activity {
    margin: -65px 0px 0px -65px;
    width: 130px;
    height: 130px;
    background: transparent none repeat scroll 0% 0%;
}
.accent-gradient #page .ls-carousel .ls-loading-container, .accent-gradient .pace .pace-activity, .accent-gradient .slider-wrapper.arrows-accent .prev i, .accent-gradient .slider-wrapper.arrows-accent .next i, .accent-gradient #page .ls-carousel .ls-nav-prev, .accent-gradient #page .ls-carousel .ls-nav-next {
    background: transparent linear-gradient(30deg, rgba(141, 198, 63, 0.9) 0%, rgba(3, 175, 235, 0.9) 100%) repeat scroll 0% 0%;
}
#page .ls-carousel .ls-loading-container, .pace .pace-activity, .slider-wrapper.arrows-accent .prev i, .slider-wrapper.arrows-accent .next i, #page .ls-carousel .ls-nav-prev, #page .ls-carousel .ls-nav-next {
    background-color: rgba(141, 198, 63, 0.9);
}
.pace .pace-activity, #page .ls-carousel .ls-loading-indicator {
    left: 50%;
    width: 50px;
    height: 50px;
    background: #76C276 none repeat scroll 0% 0%;
    pointer-events: none;
    border-radius: 100%;
    position: fixed;
    display: block;
    z-index: 2000;
    top: 50%;
    margin: -25px 0px 0px -25px;
}
#load.light-loading .pace .pace-activity::before, #load.light-loading .pace .pace-activity::after {
    border-color: rgba(136, 136, 136, 0.25);
}
#load .pace .pace-activity::before {
    bottom: 0px;
    left: 0px;
    width: 130px;
    height: 130px;
}
#load .pace .pace-activity::before, #load .pace .pace-activity::after {
    border-color: rgba(255, 255, 255, 0.94);
}
#load .pace .pace-activity::before, #load .pace .pace-activity::after {
    border-width: 7px;
}
.pace .pace-activity::before, #page .ls-carousel .ls-loading-indicator::before, .light-loading .pace .pace-activity::before {
    width: 32px;
    height: 32px;
    border-right-color: transparent !important;
    border-left-color: transparent !important;
    animation: 3s linear 0s normal none infinite running pace-rotation;
}
.customSelect, blockquote, .entry-author, .format-aside-content, .format-status-content, .format-link-content, .dl-menuwrapper, .project-media, .project-content, .ngg-imagebrowser img, .page-links, .paginator a, .page-nav, .filter-categories, .filter-extras, .filter-by, .filter-sorting, .filter-categories a, .box-style-table .action-button, .shortcode-tabs .tab, .tab-style-one.tab-horizontal .tab-inner-content, .shortcode-table, .content .shortcode-table, .shortcode-single-image, .shortcode-banner-inside, .shortcode-banner, .fs-entry-content, .rollover-content, .fs-entry-slide, .dt-format-gallery a, .dt-format-gallery .rollover-video, #main .minimal .plan, #main #pricing-table .plan, .wpb_tour.tab-style-two .wpb_tabs_nav, .wpb_tour.tab-style-one .wpb_tabs_nav, .wpb_tour.tab-style-three .wpb_tabs_nav, #main #content .rotatingtweet, .mfp-container, img.mfp-img, .mfp-img-mobile .mfp-bottom-bar, .soc-ico a, .cs-style-3 .rollover-content-wrap, .fancy-date a, .comment-form .form-fields > span, .commentlist .comment > article, .hover-style-two:not(.hover-color-static) .links-container > a, .buttons-on-img .links-container > a, .slider-link, .photo-scroller .ts-slide, .photo-scroller .scroller-thumbnails .ts-cell, .paginator a, .bg-on .fs-entry-slide, .tp-bullets.custom .bullet::before, .pace .pace-activity::before, .pace .pace-activity::after, .header-bottom-bar .wf-container-top, .overlay-door, .slider-post-inner .share-button.entry-share, .images-list-inner .share-button.entry-share, .photo-scroller .slide-caption, .rsVideoContainer.rsIOSVideo iframe, .rsVideoContainer.rsIOSVideo video, .rsVideoContainer.rsIOSVideo embed, .header-side-left.footer-overlap #footer, .header-side-right.footer-overlap #footer {
    box-sizing: border-box;
}
.pace .pace-activity::before, .pace .pace-activity::after, #page .ls-carousel .ls-loading-indicator::before, #page .ls-carousel .ls-loading-indicator::after {
    position: absolute;
    bottom: 9px;
    left: 9px;
    display: block;
    border: 3px solid #FFF;
    border-radius: 50%;
    content: "";
}
.pace .pace-activity, #page .ls-carousel .ls-loading-indicator {
    pointer-events: none;
}
.pace {
    pointer-events: none;
}
#load.light-loading .pace .pace-activity::before, #load.light-loading .pace .pace-activity::after {
    border-color: rgba(136, 136, 136, 0.25);
}
#load .pace .pace-activity::after {
    bottom: 33px;
    left: 33px;
    width: 66px;
    height: 66px;
}
#load .pace .pace-activity::before, #load .pace .pace-activity::after {
    border-color: rgba(255, 255, 255, 0.94);
}
#load .pace .pace-activity::before, #load .pace .pace-activity::after {
    border-width: 7px;
}
.pace .pace-activity::after, #page .ls-carousel .ls-loading-indicator::after, .light-loading .pace .pace-activity::after {
    bottom: 17px;
    left: 17px;
    width: 16px;
    height: 16px;
    border-top-color: transparent !important;
    border-bottom-color: transparent !important;
    animation: 1s linear 0s normal none infinite running pace-rotation;
}
</style>
<div class="accent-gradient"> 
<div style="" id="load" class="light-loading"><div class="pace pace-active"><div class="pace-activity"></div></div></div>
</div>

<div class="container-fluid">
	<div class="row">
		
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<?php if (count($this->categoria)) { ?>
					<?php foreach ($this->categoria as $aux){ ?>  
						
						<div class="col-md-1" id="<?php echo $aux->id;?>">
						<a href="#" class="thumbnail"><?php echo $aux->nombre;?></a>
						</div>
					<?php } ?>
				<?php } ?>	
			</div>
		</div>
	</div>
</div>



	<div class="container-fluid">
			<div class="row" id="section-venta" >
				<div class="col-sm-3 col-md-3 ">
					<div class="panel panel-success" style="height:285px;overflow-y:auto;">
						<div id="categorias" class="list-group">
							<?php if (count($this->categoria)) { ?>
								<?php foreach ($this->categoria as $aux) { ?>  
									<button type="button" id="<?php echo $aux->id;?>" class="list-group-item text-right-force" ><?php echo $aux->nombre;?>&nbsp;&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></button>
								<?php } ?>
							<?php }
							else { ?>
								<div class="col-md-12">
								<button type="button" class="list-group-item">No existen productos para esta categoría</button>
								</div>
							<?php } ?>
						</div>
					</div>
				</div> 
				<div class="col-sm-6 col-md-6 ">
				<div class="panel panel-success">
					<div class="panel-body" style="overflow-y:auto;height:285px;">
						<div id="productos" class="row-fluid placeholders">
							<div class="col-sm-12 col-md-12 placeholder">
								<button type="button" class="list-group-item">Por favor seleccione una categoría</button>
							</div>
						</div>
					</div>
				</div>
				</div>
				<div class="col-sm-3 col-md-3 ">
					<div class="panel panel-success">
						
						<div class="panel-body" style="overflow-y:auto;height:285px;">
							<div class="row-fluid">
								<?php if (count($this->agregado)) { ?>
									<?php foreach ($this->agregado as $aux) { ?>
										<div class="col-xs-4 col-sm-6 col-md-4">
											<a href="<?php echo $aux->imagen;?>" class="image-link"><img data-toggle="tooltip" data-placement="bottom" src="<?php echo $aux->imagen;?>" id="<?php echo $aux->id;?>" class="img-responsive thumbnail agr" title="<?php echo $aux->descripcion;?>" style="cursor:pointer; margin-bottom:0;"></a>
											<p class="text-center txt-productos"><?php echo $aux->nombre;?></p>
										</div>
										
									<?php } ?>
								<?php }
								else { ?>
									<button type="button" class="list-group-item">No existen agregados</button>
								<?php } ?>
							</div>
						</div>
					</div>
				</div>				
			</div>
			
			<div class="row" id="section-venta" >
				<div class="col-sm-3 col-md-3">
					<div class="panel panel-default">
					  <div class="panel-heading">

						  	<div class="btn-group btn-group-justified" role="group">
							  <div class="btn-group" role="group">
							    <button type="button" class="btn btn-default active" style="padding:0;" id="sel-mesas"><span class="flaticon-restaurant33"></span></button>
							  </div>
							  <div class="btn-group" role="group">
							    <button type="button" class="btn btn-default" style="padding:0;" id="sel-dom"><span class="flaticon-restaurant36"></span></button>
							  </div>
							</div>
						</div>
					  <div class="panel-body" id="cont-forma-venta" style="height:220px;">

					  	

					  	<div class="row">
					  		<div class="col-sm-12">
					  			<label>PEDIDOS EN MESAS</label>
						  		<select class="form-control input-sm mesa">
						  		<?php if (count($this->mesa)) { ?>
						  			<option value="0" >Seleccione mesa</option>
									<?php foreach ($this->mesa as $aux) { ?>
										<!--button type="button" id="<?php echo $aux->id; ?>" class="btn btn-default mesa" alt="<?php echo $aux->estado; ?>" data-toggle="popover" title="Mesa <?php echo $aux->numero; ?>" data-placement="top" data-content="<?php if($aux->estado == 1){?> Ocupada <?php }else{?> Libre <?php }?>"></button-->
										<option value="<?php echo $aux->id; ?>" alt="<?php echo $aux->estado; ?>" >Mesa <?php echo $aux->numero; ?></option>

									<?php } ?>
								<?php } ?>
								</select>
							</div>
						</div>	
						<div class="row" style="margin-top:10px;">
					  		<div class="col-sm-6 text-center">
					  			<dl class="dl-vertical">
								  <dt>Total</dt>
								  <dd class="total"></dd>							  				  
								</dl>
					  		</div>
					  		<div class="col-sm-6 text-center">
					  		<dl class="dl-vertical">
								  <dt>Estado</dt>
								  <dd><p class="error"><div id="estado"></div></p></dd>
							</dl>
							</div>					  		
					  	</div>	
					  	<div class="row">
					  		<div class="col-sm-12">
					  			<textarea id="descripcion" class="form-control"></textarea>
					  		</div>
					  	</div>																						
					  </div>
					</div>	
				</div>
				<div class="col-sm-9 col-md-9">
					<div class="panel panel-default">
					  
					  <div class="panel-body" style="height:270px;padding:0;">
					  	<div class="row-fluid" style="max-height:76%; height:76%; overflow-x: auto;">
					  		<table id="pedido" class="table table-bordered">
					  			<thead>
					  				<tr>
					  					<th>Cantidad</th>
					  					<th>Nombre</th>
					  					<th>Valor</th>
					  					<th>Total</th>
					  					<th>Acción</th>
					  				</tr>
					  			</thead>
					  			<tbody>
					  				<tr class="noPedido">
					  					<td colspan="5" align="center">No existe pedido en curso</td>
					  				</tr>
					  			</tbody>					  				
					  		</table>
					  	</div>
						<div class="row-fluid">
							<div class="col-md-9">
								<div class="row">
									<div class="col-md-12">
										<a id="finalizar-2" class="btn btn-success" href="#" role="button"><span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span> Finalizar Venta (F1)</a>

										<a id="generar" class="btn btn-default" href="#" role="button"><span class="glyphicon glyphicon-print" aria-hidden="true"></span> Comanda (F2)</a>
										<a id="guardar" class="btn btn-primary" href="#" role="button"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Guardar (F4)</a>
										
										<a id="cancelar" class="btn btn-warning" href="/ventas/" role="button"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> Cancelar (Esc)</a>
										<a id="anular" class="btn btn-danger" href="#" role="button"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Anular (Supr)</a>								
									</div>
								</div>
								<div class="row">
									<div class="col-md-11">
										
										<div id="pedidoMesa" ><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Seleccione una mesa</span></div>
									</div>
								</div>

							</div>

							<div class="col-md-1">
								<p style="margin-bottom:5px;">Subtotal</p>
								<p style="margin-bottom:5px;">Total</p>
							</div>

							<div class="col-md-2">
								
								<p id="subTotal" class="text-right" style="font-size:18px;margin-bottom:5px;font-weight:bold;">$0</p>
								<p id="Total" class="text-right total" style="font-size:18px;margin-bottom:5px;font-weight:bold;">$0</p>							
							</div> 
						</div>
					  </div>
					</div>			
				</div>	
			</div>
	</div>
		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
			<div class="modal-dialog modal-sm" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">Finalizar Pedido</h4>
					</div>
					<div class="modal-body">
						<label for="formas_pagos">FORMA DE PAGO</label>
        				<select class="form-control chosen-select" name="formas_pagos" id="formas_pagos">
						</select>
						
        				<label for="total_a_pagar">TOTAL A PAGAR</label>
        				<input type="text" class="form-control" id="total_a_pagar" name="total_a_pagar" value="" readonly >
        				
						<label for="monto_paga" class="section_monto">EFECTIVO</label>
						<input type="text" class="form-control section_monto" id="monto_paga" name="monto_paga" value="" >
						
						<label for="vuelto" class="section_vuelto">VUELTO</label>
						<input type="text" class="form-control section_vuelto" id="vuelto" name="vuelto" value="" readonly >
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
						<button id="finalizar-3" onClick="finalizarVenta();" type="button" class="btn btn-success"><span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span> Finalizar</button>
						
					</div>
				</div>
			</div>
		</div>
		
		<div id="cargar-load">
		</div>
		
		

		

		<script>
			bodydisabled('disabled');
			//setTimeout(function(){useDefaultPrinter();},15000);
			
			function imprimir(ped_id){

				var productos;
				var pedido;
				
				
				//Llamada datosde los productos del pedido
				$.ajax({
					url:'/ventas/imprimir/'+ped_id+'/'+1+'/',
					async: true,
					dataType: "json",
					success:
					function(response){
						printHTML(response,false);
						printHTML(response,true);
					}
				});			
			}
			
			
			$(function () {
			  $('[data-toggle="tooltip"]').tooltip();
			  $('[data-toggle="popover"]').popover({delay:{"hide":2000},trigger:"hover"})
			  
		$(document).ajaxStart(function(){
		
			$("#section-venta a").attr("disabled", "disabled");

			
		});
		
		$(document).ajaxStop(function(){
			
			$("#section-venta a").removeAttr("disabled");

			
		});				  
			})
		</script>
